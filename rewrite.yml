---
# This OpenRewrite recipe migrates `pom.xml` files from EAP 7.x to EAP 8.x as outlined here:
# https://docs.redhat.com/en/documentation/red_hat_jboss_enterprise_application_platform/8.0/html/migration_guide/migrate-a-jboss-eap-application-s-maven-project-to-jboss-eap-8-0_default#migrate-a-jboss-eap-application-s-maven-project-to-jboss-eap-8-0_default
# and others, such as Hibernate.
type: specs.openrewrite.org/v1beta/recipe
name: EAP80
displayName: Migrate EAP 7.4/EE8 Dependencies and more to EAP 8.0/EE10
description: Updates EAP BOM coordinates and migrates EE8 artifacts to EE10 based on those changes. Also removes outdated dependencies.
recipeList:
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.bom
      oldArtifactId: jboss-eap-jakartaee8
      newArtifactId: jboss-eap-ee
      newVersion: 8.0.4.GA-redhat-00006

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.bom
      oldArtifactId: jboss-eap-jakartaee8-with-tools
      newArtifactId: jboss-eap-ee-with-tools
      newVersion: 8.0.4.GA-redhat-00006

  # `org.jboss.spec:jboss-javaee-8.0` is not mentioned in the migration guide.
  #  At this point, we assume the use of the comprehensive BOM from EAP 8.0.
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec
      oldArtifactId: jboss-javaee-8.0
      newGroupId: org.jboss.bom
      newArtifactId: jboss-eap-ee
      newVersion: 8.0.4.GA-redhat-00006

  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: org.wildfly
      artifactId: wildfly-ejb-client-legacy-bom

  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: org.jboss.spec
      artifactId: jboss-jakartaee-8.0

  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: org.jboss.spec
      artifactId: jboss-jakartaee-web-8.0

  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: org.jboss.bom
      artifactId: eap-runtime-artifacts

  # When migrating to Jakarta EE 10, it is essential to remove javax artifacts from the dependency management section
  # the pom.xml. These dependencies are now managed through the Bill of Materials (BOM) provided by the
  # Jakarta EE specifications or Red Hat's JBoss Enterprise Application Platform (EAP).
  # This approach ensures consistency and compatibility with Jakarta EE 10 standards.
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.activation
      artifactId: javax.activation-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.annotation
      artifactId: javax.annotation-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.el
      artifactId: javax.el-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.interceptor
      artifactId: javax.interceptor-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.mail
      artifactId: javax.mail-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.persistence
      artifactId: javax.persistence-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.servlet
      artifactId: javax.servlet-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.servlet.jsp
      artifactId: javax.servlet.jsp-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.websocket
      artifactId: javax.websocket-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.ws.rs
      artifactId: javax.ws.rs-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.xml.bind
      artifactId: javax.xml.bind-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.xml.soap
      artifactId: javax.xml.soap-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.xml.ws
      artifactId: javax.xml.ws-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.validation
      artifactId: validation-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.faces
      artifactId: javax.faces-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.faces
      artifactId: jsf-api
  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: javax.faces
      artifactId: jsf-impl

  # ---- end

  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: org.hibernate
      artifactId: hibernate-core

  - org.openrewrite.maven.RemoveManagedDependency:
      groupId: org.hibernate
      artifactId: hibernate-entitymanager

  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: jakarta.platform
      artifactId: jakarta.jakartaee-bom
      newVersion: 10.0.0

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.jws
      oldArtifactId: jsr181-api
      newArtifactId: jboss-jakarta-xml-ws-api_4.0_spec
      newGroupId: org.jboss.spec.jakarta.xml.ws
      newVersion: "*"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.xml.ws
      oldArtifactId: jboss-jaxws-api_2.3_spec
      newArtifactId: jboss-jakarta-xml-ws-api_4.0_spec
      newGroupId: org.jboss.spec.jakarta.xml.ws
      newVersion: "*"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: com.sun.activation
      oldArtifactId: javax.activation
      newGroupId: jakarta.activation
      newArtifactId: jakarta.activation-api
      newVersion: "2.1.*"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.annotation
      oldArtifactId: javax.annotation-api
      newGroupId: jakarta.annotation
      newArtifactId: jakarta.annotation-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.annotation
      oldArtifactId: jboss-annotations-api_1.3_spec
      newGroupId: jakarta.annotation
      newArtifactId: jakarta.annotation-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.security.auth.message
      oldArtifactId: jboss-jaspi-api_1.0_spec
      newGroupId: jakarta.authentication
      newArtifactId: jakarta.authentication-api
      changeManagedDependency: true
      overrideManagedVersion: false
      newVersion: 3.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: jakarta.authorization
      oldArtifactId: jboss-jaspi-api_1.0_spec
      newGroupId: jakarta.authentication
      newArtifactId: jakarta.authorization-api
      changeManagedDependency: true
      overrideManagedVersion: false
      newVersion: 3.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.security.jacc
      oldArtifactId: jboss-jacc-api_1.5_spec
      newGroupId: jakarta.authorization
      newArtifactId: jakarta.authorization-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.batch
      oldArtifactId: jboss-batch-api_1.0_spec
      newGroupId: jakarta.batch
      newArtifactId: jakarta.batch-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.batch
      oldArtifactId: javax.batch-api
      newGroupId: jakarta.batch
      newArtifactId: jakarta.batch-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.ejb
      oldArtifactId: jboss-ejb-api_3.2_spec
      newGroupId: jakarta.ejb
      newArtifactId: jakarta.ejb-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.ejb
      oldArtifactId: javax.ejb-api
      newGroupId: jakarta.ejb
      newArtifactId: jakarta.ejb-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.el
      oldArtifactId: jboss-el-api_3.0_spec
      newGroupId: org.jboss.spec.jakarta.el
      newArtifactId: jboss-el-api_5.0_spec
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.el
      oldArtifactId: javax.el-api
      newGroupId: jakarta.el
      newArtifactId: jakarta.el-api
      newVersion: 5.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.glassfish
      oldArtifactId: jakarta.el
      newGroupId: org.jboss.spec.jakarta.el
      newArtifactId: jboss-el-api_5.0_spec
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.glassfish
      oldArtifactId: javax.el
      newGroupId: org.glassfish
      newArtifactId: jakarta.el
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.enterprise.concurrent
      oldArtifactId: jboss-concurrency-api_1.0_spec
      newGroupId: jakarta.enterprise.concurrent
      newArtifactId: jakarta.enterprise.concurrent-api
      newVersion: 3.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.faces
      oldArtifactId: jboss-jsf-api_2.3_spec
      newGroupId: jakarta.faces
      newArtifactId: jakarta.faces-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.faces
      oldArtifactId: jsf-api
      newGroupId: jakarta.faces
      newArtifactId: jakarta.faces-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.faces
      oldArtifactId: javax.faces-api
      newGroupId: jakarta.faces
      newArtifactId: jakarta.faces-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.interceptor
      oldArtifactId: jboss-interceptors-api_1.2_spec
      newGroupId: jakarta.interceptor
      newArtifactId: jakarta.interceptor-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.jms
      oldArtifactId: jboss-jms-api_2.0_spec
      newGroupId: jakarta.jms
      newArtifactId: jakarta.jms-api
      newVersion: 3.1.*

  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: com.sun.mail
      artifactId: jakarta.mail
      newVersion: "2.x"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: com.sun.mail
      oldArtifactId: javax.mail
      newGroupId: jakarta.mail
      newArtifactId: jakarta.mail-api
      newVersion: "2.1.*"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.mail
      oldArtifactId: javax.mail-api
      newGroupId: jakarta.mail
      newArtifactId: jakarta.mail-api
      newVersion: "2.1.*"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.resource
      oldArtifactId: jboss-connector-api_1.7_spec
      newGroupId: jakarta.resource
      newArtifactId: jakarta.resource-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.servlet
      oldArtifactId: jboss-servlet-api_4.0_spec
      newGroupId: jakarta.servlet
      newArtifactId: jakarta.servlet-api
      newVersion: 6.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.servlet.jsp
      oldArtifactId: jboss-jsp-api_2.3_spec
      newGroupId: jakarta.servlet.jsp
      newArtifactId: jakarta.servlet.jsp-api
      newVersion: 3.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.servlet.jsp
      oldArtifactId: javax.servlet.jsp-api
      newGroupId: jakarta.servlet.jsp
      newArtifactId: jakarta.servlet.jsp-api
      newVersion: 3.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.apache.taglibs
      oldArtifactId: taglibs-standard-spec
      newGroupId: jakarta.servlet.jsp.jstl
      newArtifactId: jakarta.servlet.jsp.jstl-api
      newVersion: 3.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.transaction
      oldArtifactId: jboss-transaction-api_1.3_spec
      newGroupId: jakarta.transaction
      newArtifactId: jakarta.transaction-api
      newVersion: 2.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.xml.bind
      oldArtifactId: jboss-jaxb-api_2.3_spec
      newGroupId: jakarta.xml.bind
      newArtifactId: jakarta.xml.bind-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.xml.bind
      oldArtifactId: javax.xml.bind-api
      newGroupId: jakarta.xml.bind
      newArtifactId: jakarta.xml.bind-api
      newVersion: 4.0.*
  
  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: org.glassfish.jaxb
      artifactId: jaxb-runtime
      newVersion: 4.0.*

  #  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
  #      oldGroupId: javax.xml.bind
  #      oldArtifactId: jsr173_api
  #      newGroupId: jakarta.xml.bind
  #      newArtifactId: jakarta.xml.bind-api

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.xml.ws
      oldArtifactId: jboss-jaxws-api_2.3_spec
      newGroupId: org.jboss.spec.jakarta.xml.ws
      newArtifactId: jboss-jakarta-xml-ws-api_4.0_spec
      newVersion: "*"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.xml.ws
      oldArtifactId: javax.xml.ws-api
      newGroupId: jakarta.xml.ws
      newArtifactId: jakarta.xml.ws-api
      newVersion: 3.0.*

  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: com.sun.xml.ws
      artifactId: jaxws-rt
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.websocket
      oldArtifactId: jboss-websocket-api_1.1_spec
      newGroupId: jakarta.websocket
      newArtifactId: jakarta.websocket-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.websocket
      oldArtifactId: javax.websocket-api
      newGroupId: jakarta.websocket
      newArtifactId: jakarta.websocket-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.ws.rs
      oldArtifactId: jboss-jaxrs-api_2.1_spec
      newGroupId: jakarta.ws.rs
      newArtifactId: jakarta.ws.rs-api
      newVersion: 4.0.*

  - org.openrewrite.maven.AddDependency:
      artifactId: jboss-jakarta-xml-ws-api_4.0_spec
      groupId: org.jboss.spec.jakarta.xml.ws
      version: 4.0.*
      onlyIfUsing: jakarta.jws.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.spec.javax.xml.soap
      oldArtifactId: jboss-saaj-api_1.4_spec
      newGroupId: org.jboss.spec.jakarta.xml.soap
      newArtifactId: jboss-saaj-api_3.0_spec
      newVersion: 1.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.xml.soap
      oldArtifactId: javax.xml.soap-api
      newGroupId: jakarta.xml.soap
      newArtifactId: jakarta.xml.soap-api
      newVersion: 3.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jboss.narayana.xts
      oldArtifactId: jbossxts
      newArtifactId: jbossxts-jakarta
      newVersion: 5.13.1.Final

  - org.openrewrite.maven.ChangeDependencyClassifier:
      groupId: org.jboss.narayana.xts
      artifactId: jbossxts-jakarta
      newClassifier: api

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-core
      newGroupId: org.hibernate.orm
      newVersion: 6.2.*
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-envers
      newGroupId: org.hibernate.orm
      newVersion: 6.2.*
  - org.openrewrite.maven.AddDependency:
      groupId: jakarta.persistence
      artifactId: jakarta.persistence-api
      version: 3.1.*
      onlyIfUsing: jakarta.persistence.*
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-jpamodelgen
      newGroupId: org.hibernate.orm
      newVersion: 6.2.*

  # Instead of continuing to rely on specific vendor APIs,
  # Hibernate has increasingly adopted the JCache standard since version 5.x.
  # This allows various cache implementations—including Ehcache 3.x—
  # to be integrated via JCache adapter layers.
  #
  # If you want to use Ehcache 3, you now do so by using `hibernate-jcache`
  # and binding Ehcache 3.x as the underlying JCache provider.
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-ehcache
      newGroupId: org.hibernate.orm
      newArtifactId: hibernate-jcache
      newVersion: "6.1.*"

  # The component `hibernate-entitymanager` has been moved to the core project `hibernate-core`.
  # Existing versions are not relevant because `hibernate-core` is included in the EAP dependency management.
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-entitymanager
      newGroupId: org.hibernate.orm
      newArtifactId: hibernate-core
      newVersion: 6.2.*
  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: org.hibernate.validator
      artifactId: hibernate-validator
      newVersion: "8.0.*"
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-validator-annotation-processor
      newGroupId: org.hibernate.validator
      newVersion: "8.0.*"
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-search
      newGroupId: org.hibernate.search
      newArtifactId: hibernate-search-mapper-orm-orm6
      newVersion: "6.2.*"
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate
      oldArtifactId: hibernate-search-engine
      newGroupId: org.hibernate.search
      newVersion: "6.2.*"
  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: org.hibernate
      artifactId: hibernate-c3p0
      newVersion: "6.2.*"
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.hibernate.javax.persistence
      oldArtifactId: hibernate-jpa-2.1-api
      newGroupId: jakarta.persistence
      newArtifactId: jakarta.persistence-api
      newVersion: 3.1.*

  # -------------------------------------------------------------------------------------
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.servlet
      oldArtifactId: javax.servlet-api
      newGroupId: jakarta.servlet
      newArtifactId: jakarta.servlet-api
      newVersion: 6.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.ws.rs
      oldArtifactId: javax.ws.rs-api
      newGroupId: jakarta.ws.rs
      newArtifactId: jakarta.ws.rs-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.persistence
      oldArtifactId: javax.persistence-api
      newGroupId: jakarta.persistence
      newArtifactId: jakarta.persistence-api
      newVersion: 3.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.inject
      oldArtifactId: javax.inject
      newGroupId: jakarta.inject
      newArtifactId: jakarta.inject-api
      newVersion: 2.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.enterprise
      oldArtifactId: cdi-api
      newGroupId: jakarta.enterprise
      newArtifactId: jakarta.enterprise.cdi-api
      newVersion: 4.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.validation
      oldArtifactId: validation-api
      newGroupId: jakarta.validation
      newArtifactId: jakarta.validation-api
      newVersion: 3.0.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.interceptor
      oldArtifactId: javax.interceptor-api
      newGroupId: jakarta.interceptor
      newArtifactId: jakarta.interceptor-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.mail
      oldArtifactId: mail
      newGroupId: jakarta.mail
      newArtifactId: jakarta.mail-api
      newVersion: "2.1.*"

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.json
      oldArtifactId: javax.json-api
      newGroupId: jakarta.json
      newArtifactId: jakarta.json-api
      newVersion: 2.1.*

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.json.bind
      oldArtifactId: javax.json.bind-api
      newGroupId: jakarta.json.bind
      newArtifactId: jakarta.json.bind-api
      newVersion: 3.0.*

  # In Jakarta EE 10, the jsf-facelets artifact from the
  # com.sun.facelets group is no longer used, as Facelets has been integrated into the core of Jakarta Server Faces (JSF).
  # Therefore, you don't need to include a separate dependency for Facelets in your pom.xml. Instead, ensure that you have
  # the appropriate JSF implementation for Jakarta EE 10. For example, you can include the following dependency:
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: com.sun.facelets
      oldArtifactId: jsf-facelets
      newGroupId: org.glassfish
      newArtifactId: jakarta.faces
      newVersion: 4.0.0
      scope: provided

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: javax.faces
      oldArtifactId: jsf-impl
      newGroupId: org.glassfish
      newArtifactId: jakarta.faces
      newVersion: 4.0.0
      scope: provided

  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: org.jboss.weld
      artifactId: weld-junit-parent
      newVersion: 4.0.x
      scope: provided

  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: com.sun.mail
      oldArtifactId: jakarta.mail
      newGroupId: org.eclipse.angus
      newArtifactId: angus-mail
      newVersion: "2.0.x"

  - org.openrewrite.java.migrate.jakarta.JavaxAuthorizationMigrationToJakartaAuthorization
  - org.openrewrite.java.migrate.jakarta.JakartaEE10
  - org.openrewrite.hibernate.MigrateToHibernate62
  - Hibernate6PersistenceUnitPropertyRenames
  - UpgradeSpringFramework_6_2
  - SpringBatch4To5_2Migration
  - MigrateJaxBPlugins
  - MigrateJaxBSchemaDefinitions
  - MigrateJaxbBindingDefinitions
  - MigrationOfVariousSpecificPlugins
  - AddJakartaXMLBindAPIifMissingByJavaPackage
  - AddJakartaWsAPIifMissingByJavaPackage
  - AddJakartaXMLBindAPIifMissingByJvnetPlugin
  - AddJakartaXMLBindAPIifMissingByCodehausPlugin
  - RemoveCompilerPluginProvidingJavaxImplementation
  - MigrationProjectSpecificSpecials
  - MigrationCDIUnit
  - MigrateSpecialWsXML
#  - org.openrewrite.maven.RemoveRedundantDependencyVersions:
#      groupPattern: "*"
#      artifactPattern: "*"
#      onlyIfManagedVersionIs: "ANY"

  # Merging libraries during migration results in duplicate dependencies, which, if not resolved, cause maven warnings.
#  - org.openrewrite.maven.RemoveDuplicateDependencies
---
type: specs.openrewrite.org/v1beta/recipe
name: UpgradeSpringFramework_6_2
displayName: Migrate to Spring Framework 6.2
description: Migrate applications to the latest Spring Framework 6.2 release.
recipeList:
  - org.openrewrite.java.spring.framework.UpgradeSpringFramework_6_1
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.springframework
      artifactId: "*"
      newVersion: 6.2.x
---
type: specs.openrewrite.org/v1beta/recipe
name: SpringBatch4To5_2Migration
displayName: Migrate to Spring Batch 5.0 from 4.3
description: Migrate applications built on Spring Batch 4.3 to the latest Spring Batch 5.2 release.
tags:
  - spring
  - batch
recipeList:
  - org.openrewrite.java.spring.batch.SpringBatch4To5Migration
  - org.openrewrite.java.dependencies.UpgradeDependencyVersion:
      groupId: org.springframework.batch
      artifactId: "*"
      newVersion: 5.2.x

---
type: specs.openrewrite.org/v1beta/recipe
name: MigrateJaxBPlugins
displayName: Migrate JAXB Maven Plugins to Jakarta EE 10
description: >-
  This recipe updates the JAXB Maven plugins from 'org.jvnet.jaxb2.maven2:maven-jaxb2-plugin' or 
  'org.codehaus.mojo:jaxb2-maven-plugin' to 'org.jvnet.jaxb:jaxb-maven-plugin'
  and upgrades its version to '4.0.x' for compatibility with Jakarta EE 10.
  https://github.com/mojohaus/jaxb2-maven-plugin - no maven plugin documentation
recipeList:
  - org.openrewrite.maven.ChangePluginGroupIdAndArtifactId:
      oldGroupId: org.jvnet.jaxb2.maven2
      oldArtifactId: maven-jaxb2-plugin
      newGroupId: org.jvnet.jaxb
      newArtifactId: jaxb-maven-plugin
  - org.openrewrite.maven.ChangePluginGroupIdAndArtifactId:
      oldGroupId: org.codehaus.mojo
      oldArtifactId: jaxb2-maven-plugin
      newGroupId: org.jvnet.jaxb
      newArtifactId: jaxb-maven-plugin
  - org.openrewrite.xml.ChangeTagValue:
      elementName: "/project/build/plugins/plugin[groupId='org.jvnet.jaxb' and artifactId='jaxb-maven-plugin']/executions/execution/goals/goal[text()='xjc']"
      oldValue: xjc
      newValue: generate
  - org.openrewrite.maven.UpgradePluginVersion:
      groupId: org.jvnet.jaxb
      artifactId: jaxb-maven-plugin
      newVersion: 4.0.x
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jvnet.jaxb2_commons
      oldArtifactId: jaxb2-basics
      newGroupId: org.jvnet.jaxb
      newArtifactId: jaxb-plugins
      newVersion: 4.0.x
  - org.openrewrite.maven.UpgradeDependencyVersion:
      groupId: org.glassfish.jaxb
      artifactId: jaxb-xjc
      newVersion: 4.0.x

---
type: specs.openrewrite.org/v1beta/recipe
name: MigrateJaxBSchemaDefinitions
displayName: Migrate JAXB Schema Definitions to Jakarta EE 10
description: >-
  This recipe updates XML schema files by changing the JAXB namespace
  to the Jakarta EE 10 namespace and setting the `jaxb:version` attribute to `3.0` for compatibility with Jakarta EE 10.
# Temporarily commenting out this recipe due to an issue with handling parent-child relationships in multi-module Maven projects.
# For more details, see: https://github.com/openrewrite/rewrite/issues/4948
#preconditions:
#  - org.openrewrite.FindSourceFiles:
#      filePattern: '**/*.xsd'
recipeList:
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: "/*[local-name()='schema']"
      attributeName: "xmlns:jaxb"
      newValue: "https://jakarta.ee/xml/ns/jaxb"
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: "/*[local-name()='schema']"
      attributeName: "xmlns"
      oldValue: "http://java.sun.com/xml/ns/jaxb"
      newValue: "https://jakarta.ee/xml/ns/jaxb"
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: "/*[local-name()='schema']"
      attributeName: "jaxb:version"
      newValue: "3.0"
---
type: specs.openrewrite.org/v1beta/recipe
name: MigrateJaxbBindingDefinitions
displayName: Migrate JAXB Binding Definitions to Jakarta EE 10
description: >-
  This recipe updates JAXB binding (`.xjb`) files by changing the JAXB namespace
  to the Jakarta EE 10 namespace and setting the `version` attribute to `3.0` for compatibility with Jakarta EE 10.
# Temporarily commenting out this recipe due to an issue with handling parent-child relationships in multi-module Maven projects.
# For more details, see: https://github.com/openrewrite/rewrite/issues/4948
#preconditions:
#  - org.openrewrite.FindSourceFiles:
#      filePattern: '**/*.xjb'
recipeList:
  - org.openrewrite.xml.ChangeNamespaceValue:
      oldValue: "http://java.sun.com/xml/ns/jaxb"
      newValue: "https://jakarta.ee/xml/ns/jaxb"
      newVersion: "3.0"
      searchAllNamespaces: true
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: "/*[local-name()='bindings']"
      attributeName: "jaxb:version"
      newValue: "3.0"
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: "/*[local-name()='bindings']"
      attributeName: "xsi:schemaLocation"
      oldValue: "^(.*)http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd(.*)$"
      newValue: "$1https://jakarta.ee/xml/ns/jaxb/bindingschema_3_0.xsd$2"
      regex: true
  - org.openrewrite.xml.ChangeTagAttribute:
      elementName: "/*[local-name()='bindings']"
      attributeName: "xsi:schemaLocation"
      oldValue: "^(.*)http://java.sun.com/xml/ns/jaxb(.*)$"
      newValue: "$1https://jakarta.ee/xml/ns/jaxb$2"
      regex: true
  - org.openrewrite.xml.ChangeNamespaceValue:
      oldValue: "https://jakarta.ee/xml/ns/jaxb/xjc"
      newValue: "http://java.sun.com/xml/ns/jaxb/xjc"
      newVersion: "3.0"
      searchAllNamespaces: true
---
type: specs.openrewrite.org/v1beta/recipe
name: MigrateSpecialWsXML
displayName: Migrate Special Ws XML
recipeList:
  - org.openrewrite.xml.ChangeNamespaceValue:
        oldValue: "http://java.sun.com/xml/ns/javaee"
        newValue: "https://jakarta.ee/xml/ns/jakartaee"
        searchAllNamespaces: true
---
type: specs.openrewrite.org/v1beta/recipe
name: AddJakartaXMLBindAPIifMissingByJavaPackage
displayName: Adds the jakarta.xml.bind-api dependency
recipeList:
  - org.openrewrite.maven.AddDependency:
      groupId: jakarta.xml.bind
      artifactId: jakarta.xml.bind-api
      version: 4.0.*
      onlyIfUsing: "javax.xml.bind.**.*"
---
type: specs.openrewrite.org/v1beta/recipe
name: AddJakartaWsAPIifMissingByJavaPackage
displayName: Adds the jboss-jakarta-xml-ws-api_4.0_spec dependency      
recipeList:
  - org.openrewrite.maven.AddDependency:
      groupId: org.jboss.spec.jakarta.xml.ws
      artifactId: jboss-jakarta-xml-ws-api_4.0_spec
      version: 4.0.*
      onlyIfUsing: "javax.jws.*"
  - org.openrewrite.maven.AddDependency:
      groupId: org.jboss.spec.jakarta.xml.ws
      artifactId: jboss-jakarta-xml-ws-api_4.0_spec
      version: 4.0.*
      onlyIfUsing: "javax.xml.ws.*"

---
type: specs.openrewrite.org/v1beta/recipe
name: AddJakartaXMLBindAPIifMissingByCodehausPlugin
displayName: Adds the jakarta.xml.bind-api dependency only if it is not already present in the pom.xml file.
# This recipe is currently non-functional due to the issue detailed at: https://github.com/openrewrite/rewrite/issues/4948
preconditions:
  - org.openrewrite.maven.search.FindPlugin:
      groupId: org.codehaus.mojo
      artifactId: jaxb2-maven-plugin
recipeList:
  - org.openrewrite.maven.AddDependency:
      groupId: jakarta.xml.bind
      artifactId: jakarta.xml.bind-api
      version: 4.0.*
---
type: specs.openrewrite.org/v1beta/recipe
name: RemoveCompilerPluginProvidingJavaxImplementation
displayName: Remove Maven Compiler Plugin for javax Implementation
description: >-
  Removes the maven-compiler-plugin when it is used to provide the javax implementation via the JDK instead of using explicit dependencies.
preconditions:
  # Match plugins without configuration
  - org.openrewrite.xml.search.FindTags:
      xPath: "/project/build/plugins/plugin[artifactId='maven-compiler-plugin' and not(configuration)]"
  # Match plugins with configuration containing release
  - org.openrewrite.xml.search.FindTags:
      xPath: "/project/build/plugins/plugin[artifactId='maven-compiler-plugin' and configuration/release]"
recipeList:
  - org.openrewrite.maven.RemovePlugin:
      groupId: org.apache.maven.plugins
      artifactId: maven-compiler-plugin
---
type: specs.openrewrite.org/v1beta/recipe
name: AddJakartaXMLBindAPIifMissingByJvnetPlugin
displayName: Adds the jakarta.xml.bind-api dependency only if it is not already present in the pom.xml file.
# This recipe is currently non-functional due to the issue detailed at: https://github.com/openrewrite/rewrite/issues/4948
preconditions:
  - org.openrewrite.maven.search.FindPlugin:
      groupId: org.jvnet.jaxb2.maven2
      artifactId: maven-jaxb2-plugin
recipeList:
  - org.openrewrite.maven.AddDependency:
      groupId: jakarta.xml.bind
      artifactId: jakarta.xml.bind-api
      version: 4.0.*
---
type: specs.openrewrite.org/v1beta/recipe
name: MigrationOfVariousSpecificPlugins
displayName: Migration of Various Specific Plugins
description: >-
  This recipe facilitates the migration of various specific plugins in a
  streamlined and efficient manner, ensuring compatibility and reducing technical debt.
# Temporarily commenting out this recipe due to an issue with handling parent-child relationships in multi-module Maven projects.
# For more details, see: https://github.com/openrewrite/rewrite/issues/4948
#preconditions:
#  - org.openrewrite.FindSourceFiles:
#      filePattern: '**/pom.xml'
recipeList:
  - org.openrewrite.maven.RemovePluginDependency:
      pluginGroupId: '*'
      pluginArtifactId: ejb-maven-plugin
      groupId: javax.ejb
      artifactId: javax.ejb-api
  - org.openrewrite.maven.RemovePluginDependency:
      pluginGroupId: '*'
      pluginArtifactId: ejb-maven-plugin
      groupId: jakarta.ejb
      artifactId: jakarta.ejb-api
---
type: specs.openrewrite.org/v1beta/recipe
name: Hibernate6PersistenceUnitPropertyRenames
displayName: "Hibernate Configuration Property Renames for persistence.xml"
description: >-
    This recipe migrates deprecated Hibernate property names in persistence.xml files according to the
      changes in Hibernate 6.0. It targets XML files defining a persistence unit.
preconditions:
    - org.openrewrite.FindSourceFiles:
          filePattern: "**/*.xml"
    - org.openrewrite.xml.search.FindTags:
          # This precondition checks for the existence of a persistence-unit element.
          # Using local-name() makes the check independent of any namespace.
          xPath: "//persistence-unit/properties"
recipeList:
    # Single property renames
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.metamodel\\.population"
          replace: "hibernate.jpa.metamodel.population"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.cfgfile"
          replace: "hibernate.cfg_xml_file"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.xml_files"
          replace: "hibernate.orm_xml_files"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.hbmxml\\.files"
          replace: "hibernate.hbm_xml_files"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.loaded\\.classes"
          replace: "hibernate.loaded_classes"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.persistenceUnitName"
          replace: "hibernate.persistenceUnitName"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.discard_pc_on_close"
          replace: "hibernate.discard_pc_on_close"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.entitymanager_factory_name"
          replace: "hibernate.session_factory_name"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.session_factory_observer"
          replace: "hibernate.session_factory_observer"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.identifier_generator_strategy_provider"
          replace: "hibernate.identifier_generator_strategy_provider"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.classcache"
          replace: "hibernate.classcache"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.collectioncache"
          replace: "hibernate.collectioncache"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.event"
          replace: "hibernate.event"
          regex: true
    - org.openrewrite.text.FindAndReplace:
          find: "hibernate\\.ejb\\.interceptor"
          replace: "hibernate.session_factory.interceptor"
          regex: true

---
type: specs.openrewrite.org/v1beta/recipe
name: MigrationProjectSpecificSpecials
displayName: Migration of Various Project specific Specials
recipeList:
  - org.openrewrite.maven.RemoveExclusion:
      groupId: '*'
      artifactId: '*'
      exclusionGroupId: org.slf4j
      exclusionArtifactId: slf4j-api
  - org.openrewrite.java.logging.slf4j.Log4jToSlf4j
  - org.openrewrite.xml.AddOrUpdateChildTag:
          parentXPath: "/project/build/plugins/plugin[artifactId='jsonschema2pojo-maven-plugin']/configuration"
          newChildTag: "<q>true</useJakartaValidation>"
          replaceExisting: true
# Version 2.x of PDFBox is based on javax, so migrate to the next major version.
  - org.openrewrite.maven.UpgradeDependencyVersion:
        groupId: org.apache.pdfbox
        artifactId: '*'
        newVersion: 3.0.x
  - org.openrewrite.maven.AddManagedDependency:
        groupId: org.apache.pdfbox
        artifactId: pdfbox-io
        version: 3.0.x
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
        oldGroupId: org.slf4j
        oldArtifactId: slf4j-log4j12
        newArtifactId: slf4j-reload4j
        newVersion: 1.7.*

---
type: specs.openrewrite.org/v1beta/recipe
name: MigrationCDIUnit
displayName: Migration CDI
recipeList:
  - org.openrewrite.maven.ChangeDependencyGroupIdAndArtifactId:
      oldGroupId: org.jglue.cdi-unit
      oldArtifactId: cdi-unit
      newGroupId: io.github.cdi-unit
      newVersion: 5.0.0-EA7
  - org.openrewrite.maven.RemoveDependency:
        groupId: io.github.classgraph
        artifactId: classgraph
        scope: test
  - org.openrewrite.java.ChangeType:
        oldFullyQualifiedTypeName: org.jglue.cdiunit.CdiRunner
        newFullyQualifiedTypeName: io.github.cdiunit.junit4.CdiRunner
  - org.openrewrite.java.ChangePackage:
      oldPackageName: org.jglue.cdiunit
      newPackageName: io.github.cdiunit
  - org.openrewrite.java.ChangePackage:
        oldPackageName: javax.enterprise.inject
        newPackageName: jakarta.enterprise.inject

# TODO
# javax => jakarta ins Strings wie z.B. String STARTUP_ANNOTATION_CLASS_NAME = "javax.ejb.Startup";
